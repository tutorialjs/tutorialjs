var setupFirebasePush=function(){if(window.firebase){var e={messagingSenderId:"764547597772"};firebase.initializeApp(e);var n=firebase.messaging();navigator.serviceWorker.register("/scripts/notificationService/firebase-messaging-sw.js").then(function(e){function i(){n.getToken().then(function(e){e?pushManager.setRegistrationId(e):pushManager.error("No Instance ID token available. Request permission to generate one."),pushManager.registerSuccessfulSetup("firebase",a)}).catch(function(e){pushManager.error(e,"Unable to retrieve refreshed token ")})}function a(){n.requestPermission().then(function(){i()}).catch(function(e){pushManager.error(e,"Unable to get permission to notify.")})}n.useServiceWorker(e),n.onTokenRefresh(i),n.onMessage(function(n){n.data.notification=JSON.parse(n.data.news);var i=n.data.notification.title,a={body:n.data.notification.body,icon:n.data.notification.img||"/images/cloud.png",data:n.data};return sendShownCallback(n.data),e.showNotification(i,a)}),i()})}};